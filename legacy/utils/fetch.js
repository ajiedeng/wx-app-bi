"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function request(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1],arguments[2];return _wepy2.default.request({url:e.url,data:e.data||{},header:e.header||Object.assign({"content-type":"application/json",Cookie:loginCookie,companyid:getUserInfo(!0).companyid,reqUserId:getUserInfo(!0).userid},e.header),method:e.method||"GET"})}function toUpload(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _wepy2.default.uploadFile({url:e.url,filePath:e.filePath||"",name:e.name||"file",formData:e.formData||{},header:e.header||Object.assign({"content-type":"application/json",Cookie:loginCookie,companyid:getUserInfo(!0).companyid,reqUserId:getUserInfo(!0).userid},e.header)})}function post(e,t,s,r,a,o){return t=r?loginUrl+t:baseUrl+t,new Promise(function(r,i){request({method:"POST",data:e,url:t,header:s},a,o).then(function(e){var t=e.data;if(200===e.statusCode&&t&&0===t.status)r(t);else{var s="";if(200===e.statusCode&&t&&0!==t.status){var a=messages[t.status||t.error];s="-52000"===a||"-52001"===a||"-52002"===a||"-52003"===a?t.msg:a||t.msg,-29952!==t.status&&10011!==t.status||(s+="，请重新登录")}else s=t.msg?t.msg:JSON.stringify(e);r(t),"group不存在"===s||!o&&(0,_wxApi.showToast)({title:""+s})}}).catch(function(e){e.errMsg&&(e=e.errMsg.split(" ")&&e.errMsg.split(" ")[1]||JSON.stringify(e)),i(e),!o&&(0,_wxApi.showToast)({title:"请求失败: "+e})})})}function get(e,t,s,r,a){return t=baseUrl+t,new Promise(function(o,i){request({data:e,url:t,header:s},r,a).then(function(e){var t=e.data;if(200===e.statusCode&&t&&0===t.status)o(t);else{var s="";if(200===e.statusCode&&t&&0!==t.status){var r=messages[t.status||t.error];s="-52000"===r||"-52001"===r||"-52002"===r||"-52003"===r?t.msg:r||t.msg,-29952!==t.status&&10011!==t.status||(s+="，请重新登录")}else s=t.msg?t.msg:JSON.stringify(e);o(t),!a&&(0,_wxApi.showToast)({title:""+s})}}).catch(function(e){e.errMsg&&(e=e.errMsg.split(" ")&&e.errMsg.split(" ")[1]||JSON.stringify(e)),i(e),!a&&(0,_wxApi.showToast)({title:""+e})})})}function put(e,t,s,r,a){return t=baseUrl+t,new Promise(function(o,i){request({method:"PUT",data:e,url:t,header:s},r,a).then(function(e){var t=e.data;if(200===e.statusCode&&t&&0===t.status)o(t);else{var s="";s=200===e.statusCode&&t&&0!==t.status?messages[t.status||t.error]||t.msg:t.msg?t.msg:JSON.stringify(e),o(t),!a&&(0,_wxApi.showToast)({title:""+s})}}).catch(function(e){e.errMsg&&(e=e.errMsg.split(" ")&&e.errMsg.split(" ")[1]||JSON.stringify(e)),i(e),!a&&(0,_wxApi.showToast)({title:""+e})})})}function upload(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],s=arguments[2];return t=baseUrl+t,new Promise(function(r,a){toUpload({url:t,header:s,filePath:e.filePath,formData:e.formData,name:e.name}).then(function(e){r(e)}).catch(function(e){e.errMsg&&(e=e.errMsg.split(" ")&&e.errMsg.split(" ")[1]||JSON.stringify(e)),a(e)})})}function download(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=baseUrl+t,new Promise(function(r){wx.uploadFile({url:t,filePath:e.filePath||"",header:s,success:function(e){r(e.data)},fail:function(){}})})}var _wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_wxApi=require("./wxApi.js"),messages=require("./messages.js"),baseUrl=require("./net.js").baseUrl,loginUrl="https://acs-so.ibroadlink.com/",_require=require("./loginInfo.js"),getCookie=_require.getCookie,getUserInfo=_require.getUserInfo,loginCookie=getCookie();module.exports={post:post,get:get,upload:upload,download:download,put:put};