"use strict";

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(t, e) {
  if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
}var _typeof = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function (t) {
  return typeof t === "undefined" ? "undefined" : _typeof2(t);
} : function (t) {
  return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t === "undefined" ? "undefined" : _typeof2(t);
},
    _createClass = function () {
  function t(t, e) {
    for (var a = 0; a < e.length; a++) {
      var s = e[a];s.enumerable = s.enumerable || !1, s.configurable = !0, "value" in s && (s.writable = !0), Object.defineProperty(t, s.key, s);
    }
  }return function (e, a, s) {
    return a && t(e.prototype, a), s && t(e, s), e;
  };
}(),
    wxRepotSdk = function () {
  function t(e) {
    _classCallCheck(this, t), this.originPage = Page, this.originApp = App, this.wxRequest = wx.request, this.haveAjax = !1, this.isReport = !1, this.timer = null, this.config = { isUse: !0, isNet: !0, isSys: !0, isLocal: !0, timeout: 300, isRepeat: !1, domain: "test.com" }, this.config = Object.assign(this.config, e || {}), this.datas = { errs: [], markuser: "", markuv: "", net: "", system: {}, loc: {}, pages: {}, ajaxs: [], type: 1 }, this.datas = Object.assign(this.datas, e.add || {}), this.init();
  }return _createClass(t, [{ key: "init", value: function value() {
      this.config.isUse && (this.page(), this.app(), this.wrapRequest(), this.config.isNet && this.network(), this.config.isSys && this.system(), this.config.isLocal && this.location());
    } }, { key: "randomString", value: function value(t) {
      t = t || 10;for (var e = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789", a = e.length, s = "", i = 0; i < t; i++) {
        s += e.charAt(Math.floor(Math.random() * a));
      }return s + new Date().getTime();
    } }, { key: "page", value: function value() {
      var t = this;Page = function Page(e) {
        var a = e.onShow || function () {};e.onShow = function () {
          clearTimeout(this.timer), t.datas.type = 1, t.isReport = !1;var e = getCurrentPages();if (e && e.length) {
            var s = e.length,
                i = e[s - 1];t.datas.pages.router = i.__route__, t.datas.pages.options = i.options || {};
          }return t.datas.markuser || wx.getStorage({ key: "ps_wx_mark_user", success: function success(e) {
              t.datas.markuser = e;
            } }), t.datas.markuv || wx.getStorage({ key: "ps_wx_mark_uv", success: function success(e) {
              t.datas.markuv = e;
            } }), this.timer = setTimeout(function () {
            t.haveAjax || (t.isReport = !0, t.datas.time = new Date().getTime(), t.report());
          }, t.config.timeout), a.apply(this, arguments);
        };var s = e.onPullDownRefresh || function () {};e.onPullDownRefresh = function () {
          return t.datas.type = 1, setTimeout(function () {
            t.datas.type = 2;
          }, 1500), s.apply(this, arguments);
        }, t.originPage(e);
      };
    } }, { key: "app", value: function value() {
      var t = this;App = function App(e) {
        var a = e.onError || function () {},
            s = e.onShow || function () {};e.onError = function (e) {
          var s = e.split(/\n/) || [],
              i = void 0,
              n = void 0,
              r = void 0,
              o = e.match(/\(.+?\)/);return o && o.length && (o = o[0]), o ? (o = o.replace(/\w.+js/g, function (t) {
            return i = t, "";
          }), o = o.split(":"), o && o.length > 1 && (r = parseInt(o[1] || 0)), n = parseInt(o[2] || 0), t.datas.errs.push({ col: n, line: r, name: i, msg: s[0] + ";" + s[1] + ";" + s[2] + ";", type: "js" })) : t.datas.errs.push({ col: 0, line: 0, name: "err", msg: e + "", type: "js" }), 2 === t.datas.type && t.report(3), a.apply(this, arguments);
        }, e.onShow = function () {
          t.isReport = !1, t.datas.type = 1;var e = t.randomString();return wx.setStorage({ key: "ps_wx_mark_user", data: e }), t.datas.markuser = e, t.datas.markuv = t.markUv(), s.apply(this, arguments);
        }, t.originApp(e);
      };
    } }, { key: "markUv", value: function value() {
      var t = new Date(),
          e = wx.getStorageSync("ps_wx_mark_uv") || "",
          a = wx.getStorageSync("ps_wx_mark_uv_time") || "",
          s = t.getFullYear() + "/" + (t.getMonth() + 1) + "/" + t.getDate() + " 23:59:59";return (!e && !a || t.getTime() > 1 * a) && (e = this.randomString(), wx.setStorage({ key: "ps_wx_mark_uv", data: e }), wx.setStorage({ key: "ps_wx_mark_uv_time", data: new Date(s).getTime() })), e;
    } }, { key: "network", value: function value() {
      var t = this;wx.getNetworkType({ success: function success(e) {
          t.datas.net = e.networkType;
        } });
    } }, { key: "system", value: function value() {
      var t = this;wx.getSystemInfo({ success: function success(e) {
          t.datas.system = e;
        } });
    } }, { key: "location", value: function value() {
      var t = this;wx.getLocation({ type: "wgs84", success: function success(e) {
          t.datas.loc = e;
        } });
    } }, { key: "wrapRequest", value: function value() {
      var t = null,
          e = wx.request,
          a = [],
          s = [],
          i = this;Object.defineProperty(wx, "request", { configurable: !0, enumerable: !0, writable: !0, value: function value() {
          var n = arguments[0] || {};i.haveAjax = !0, a.push({ url: n.url || "", options: n.data || "", method: n.method || "GET", begintime: new Date().getTime() });var r = n.complete || function (t) {};return n.complete = function (e) {
            var o = "object" === _typeof(e.data) ? JSON.stringify(e.data) : e.data || "",
                u = e.header["Content-Length"] || o.length || 0;return s.push({ errMsg: e.errMsg, url: n.url || "", statusCode: e.statusCode, endtime: new Date().getTime(), bodySize: u }), s.length === a.length && (clearTimeout(t), t = setTimeout(function () {
              s.length === a.length && i.mergeAjax(a, s), a = [], s = [], clearTimeout(t);
            }, i.config.timeout)), r.apply(this, arguments);
          }, e.apply(this, arguments);
        } });
    } }, { key: "mergeAjax", value: function value(t, e) {
      var a = this;e.forEach(function (s, i) {
        if (t.forEach(function (t, e) {
          s.url.indexOf(t.url) > -1 && ("request:ok" === s.errMsg && 200 === s.statusCode ? a.datas.ajaxs.push({ duration: s.endtime - t.begintime || 0, name: t.url, method: t.method, bodySize: s.bodySize, options: t.options }) : a.datas.errs.push({ name: t.url, method: t.method, msg: s.errMsg, type: "ajax", status: s.statusCode, options: t.options }));
        }), i === e.length - 1) {
          if (!a.config.isRepeat && a.isReport) return;a.isReport = !0, a.datas.time = new Date().getTime(), a.report();
        }
      });
    } }, { key: "report", value: function value(t) {
      var e = { appId: this.datas.appId, markuser: this.datas.markuser, markuv: this.datas.markuv, pages: this.datas.pages, time: this.datas.time, type: this.datas.type, ajaxs: this.datas.ajaxs, errs: this.datas.errs };this.config.isNet && 1 === this.datas.type && (e.net = this.datas.net), this.config.isSys && 1 === this.datas.type && (e.system = this.datas.system), this.config.isLocal && 1 === this.datas.type && (e.loc = this.datas.loc), t && (e.type = t);var a = null,
          s = this.wxRequest({ method: "POST", url: this.config.domain, data: e, success: function success(t) {
          clearTimeout(a);
        } });this.haveAjax = !1, this.isReport = !1, this.datas.type = 2, this.datas.errs = [], this.datas.ajaxs = [], a = setTimeout(function () {
        s.abort();
      }, 3e3);
    } }]), t;
}();module.exports = wxRepotSdk;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInd4LXJlcG9ydC1zZGsuanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwidCIsImUiLCJUeXBlRXJyb3IiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl9jcmVhdGVDbGFzcyIsImEiLCJsZW5ndGgiLCJzIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ3eFJlcG90U2RrIiwib3JpZ2luUGFnZSIsIlBhZ2UiLCJvcmlnaW5BcHAiLCJBcHAiLCJ3eFJlcXVlc3QiLCJ3eCIsInJlcXVlc3QiLCJoYXZlQWpheCIsImlzUmVwb3J0IiwidGltZXIiLCJjb25maWciLCJpc1VzZSIsImlzTmV0IiwiaXNTeXMiLCJpc0xvY2FsIiwidGltZW91dCIsImlzUmVwZWF0IiwiZG9tYWluIiwiYXNzaWduIiwiZGF0YXMiLCJlcnJzIiwibWFya3VzZXIiLCJtYXJrdXYiLCJuZXQiLCJzeXN0ZW0iLCJsb2MiLCJwYWdlcyIsImFqYXhzIiwidHlwZSIsImFkZCIsImluaXQiLCJ2YWx1ZSIsInBhZ2UiLCJhcHAiLCJ3cmFwUmVxdWVzdCIsIm5ldHdvcmsiLCJsb2NhdGlvbiIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJEYXRlIiwiZ2V0VGltZSIsIm9uU2hvdyIsImNsZWFyVGltZW91dCIsImdldEN1cnJlbnRQYWdlcyIsInJvdXRlciIsIl9fcm91dGVfXyIsIm9wdGlvbnMiLCJnZXRTdG9yYWdlIiwic3VjY2VzcyIsInNldFRpbWVvdXQiLCJ0aW1lIiwicmVwb3J0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJvblB1bGxEb3duUmVmcmVzaCIsIm9uRXJyb3IiLCJzcGxpdCIsIm4iLCJyIiwibyIsIm1hdGNoIiwicmVwbGFjZSIsInBhcnNlSW50IiwicHVzaCIsImNvbCIsImxpbmUiLCJuYW1lIiwibXNnIiwicmFuZG9tU3RyaW5nIiwic2V0U3RvcmFnZSIsImRhdGEiLCJtYXJrVXYiLCJnZXRTdG9yYWdlU3luYyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0TmV0d29ya1R5cGUiLCJuZXR3b3JrVHlwZSIsImdldFN5c3RlbUluZm8iLCJnZXRMb2NhdGlvbiIsInVybCIsIm1ldGhvZCIsImJlZ2ludGltZSIsImNvbXBsZXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsInUiLCJoZWFkZXIiLCJlcnJNc2ciLCJzdGF0dXNDb2RlIiwiZW5kdGltZSIsImJvZHlTaXplIiwibWVyZ2VBamF4IiwiZm9yRWFjaCIsImluZGV4T2YiLCJkdXJhdGlvbiIsInN0YXR1cyIsImFwcElkIiwiYWJvcnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUFhLFNBQVNBLGVBQVQsQ0FBeUJDLENBQXpCLEVBQTJCQyxDQUEzQixFQUE2QjtBQUFDLE1BQUcsRUFBRUQsYUFBYUMsQ0FBZixDQUFILEVBQXFCLE1BQU0sSUFBSUMsU0FBSixDQUFjLG1DQUFkLENBQU47QUFBeUQsS0FBSUMsVUFBUSxjQUFZLE9BQU9DLE1BQW5CLElBQTJCLHFCQUFpQkEsT0FBT0MsUUFBeEIsQ0FBM0IsR0FBNEQsVUFBU0wsQ0FBVCxFQUFXO0FBQUMsZ0JBQWNBLENBQWQsMENBQWNBLENBQWQ7QUFBZ0IsQ0FBeEYsR0FBeUYsVUFBU0EsQ0FBVCxFQUFXO0FBQUMsU0FBT0EsS0FBRyxjQUFZLE9BQU9JLE1BQXRCLElBQThCSixFQUFFTSxXQUFGLEtBQWdCRixNQUE5QyxJQUFzREosTUFBSUksT0FBT0csU0FBakUsR0FBMkUsUUFBM0UsVUFBMkZQLENBQTNGLDBDQUEyRkEsQ0FBM0YsQ0FBUDtBQUFvRyxDQUFyTjtBQUFBLElBQXNOUSxlQUFhLFlBQVU7QUFBQyxXQUFTUixDQUFULENBQVdBLENBQVgsRUFBYUMsQ0FBYixFQUFlO0FBQUMsU0FBSSxJQUFJUSxJQUFFLENBQVYsRUFBWUEsSUFBRVIsRUFBRVMs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RSxTQUFRLGlCQUFTdEUsQ0FBVCxFQUFXO0FBQUNnRSx1QkFBYXZELENBQWI7QUFBZ0IsU0FBakYsRUFBZixDQUFiLENBQWdILEtBQUtpQixRQUFMLEdBQWMsQ0FBQyxDQUFmLEVBQWlCLEtBQUtDLFFBQUwsR0FBYyxDQUFDLENBQWhDLEVBQWtDLEtBQUtXLEtBQUwsQ0FBV1MsSUFBWCxHQUFnQixDQUFsRCxFQUFvRCxLQUFLVCxLQUFMLENBQVdDLElBQVgsR0FBZ0IsRUFBcEUsRUFBdUUsS0FBS0QsS0FBTCxDQUFXUSxLQUFYLEdBQWlCLEVBQXhGLEVBQTJGckMsSUFBRThELFdBQVcsWUFBVTtBQUFDNUQsVUFBRTZHLEtBQUY7QUFBVSxPQUFoQyxFQUFpQyxHQUFqQyxDQUE3RjtBQUFtSSxLQUF4cUIsRUFBLzZILENBQWYsR0FBMG1KeEgsQ0FBam5KO0FBQW1uSixDQUExakssRUFBamUsQ0FBOGhMeUgsT0FBT0MsT0FBUCxHQUFleEcsVUFBZiIsImZpbGUiOiJ3eC1yZXBvcnQtc2RrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX12YXIgX3R5cGVvZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBzPWVbYV07cy5lbnVtZXJhYmxlPXMuZW51bWVyYWJsZXx8ITEscy5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gcyYmKHMud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHMua2V5LHMpfX1yZXR1cm4gZnVuY3Rpb24oZSxhLHMpe3JldHVybiBhJiZ0KGUucHJvdG90eXBlLGEpLHMmJnQoZSxzKSxlfX0oKSx3eFJlcG90U2RrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSx0aGlzLm9yaWdpblBhZ2U9UGFnZSx0aGlzLm9yaWdpbkFwcD1BcHAsdGhpcy53eFJlcXVlc3Q9d3gucmVxdWVzdCx0aGlzLmhhdmVBamF4PSExLHRoaXMuaXNSZXBvcnQ9ITEsdGhpcy50aW1lcj1udWxsLHRoaXMuY29uZmlnPXtpc1VzZTohMCxpc05ldDohMCxpc1N5czohMCxpc0xvY2FsOiEwLHRpbWVvdXQ6MzAwLGlzUmVwZWF0OiExLGRvbWFpbjpcInRlc3QuY29tXCJ9LHRoaXMuY29uZmlnPU9iamVjdC5hc3NpZ24odGhpcy5jb25maWcsZXx8e30pLHRoaXMuZGF0YXM9e2VycnM6W10sbWFya3VzZXI6XCJcIixtYXJrdXY6XCJcIixuZXQ6XCJcIixzeXN0ZW06e30sbG9jOnt9LHBhZ2VzOnt9LGFqYXhzOltdLHR5cGU6MX0sdGhpcy5kYXRhcz1PYmplY3QuYXNzaWduKHRoaXMuZGF0YXMsZS5hZGR8fHt9KSx0aGlzLmluaXQoKX1yZXR1cm4gX2NyZWF0ZUNsYXNzKHQsW3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZy5pc1VzZSYmKHRoaXMucGFnZSgpLHRoaXMuYXBwKCksdGhpcy53cmFwUmVxdWVzdCgpLHRoaXMuY29uZmlnLmlzTmV0JiZ0aGlzLm5ldHdvcmsoKSx0aGlzLmNvbmZpZy5pc1N5cyYmdGhpcy5zeXN0ZW0oKSx0aGlzLmNvbmZpZy5pc0xvY2FsJiZ0aGlzLmxvY2F0aW9uKCkpfX0se2tleTpcInJhbmRvbVN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9dHx8MTA7Zm9yKHZhciBlPVwiQUJDREVGR0hKS01OUFFSU1RXWFlaYWJjZGVmaGlqa21ucHJzdHd4eXoxMjM0NTY3ODlcIixhPWUubGVuZ3RoLHM9XCJcIixpPTA7aTx0O2krKylzKz1lLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYSkpO3JldHVybiBzKyhuZXcgRGF0ZSkuZ2V0VGltZSgpfX0se2tleTpcInBhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7UGFnZT1mdW5jdGlvbihlKXt2YXIgYT1lLm9uU2hvd3x8ZnVuY3Rpb24oKXt9O2Uub25TaG93PWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLHQuZGF0YXMudHlwZT0xLHQuaXNSZXBvcnQ9ITE7dmFyIGU9Z2V0Q3VycmVudFBhZ2VzKCk7aWYoZSYmZS5sZW5ndGgpe3ZhciBzPWUubGVuZ3RoLGk9ZVtzLTFdO3QuZGF0YXMucGFnZXMucm91dGVyPWkuX19yb3V0ZV9fLHQuZGF0YXMucGFnZXMub3B0aW9ucz1pLm9wdGlvbnN8fHt9fXJldHVybiB0LmRhdGFzLm1hcmt1c2VyfHx3eC5nZXRTdG9yYWdlKHtrZXk6XCJwc193eF9tYXJrX3VzZXJcIixzdWNjZXNzOmZ1bmN0aW9uKGUpe3QuZGF0YXMubWFya3VzZXI9ZX19KSx0LmRhdGFzLm1hcmt1dnx8d3guZ2V0U3RvcmFnZSh7a2V5OlwicHNfd3hfbWFya191dlwiLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dC5kYXRhcy5tYXJrdXY9ZX19KSx0aGlzLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmhhdmVBamF4fHwodC5pc1JlcG9ydD0hMCx0LmRhdGFzLnRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksdC5yZXBvcnQoKSl9LHQuY29uZmlnLnRpbWVvdXQpLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgcz1lLm9uUHVsbERvd25SZWZyZXNofHxmdW5jdGlvbigpe307ZS5vblB1bGxEb3duUmVmcmVzaD1mdW5jdGlvbigpe3JldHVybiB0LmRhdGFzLnR5cGU9MSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5kYXRhcy50eXBlPTJ9LDE1MDApLHMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0Lm9yaWdpblBhZ2UoZSl9fX0se2tleTpcImFwcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztBcHA9ZnVuY3Rpb24oZSl7dmFyIGE9ZS5vbkVycm9yfHxmdW5jdGlvbigpe30scz1lLm9uU2hvd3x8ZnVuY3Rpb24oKXt9O2Uub25FcnJvcj1mdW5jdGlvbihlKXt2YXIgcz1lLnNwbGl0KC9cXG4vKXx8W10saT12b2lkIDAsbj12b2lkIDAscj12b2lkIDAsbz1lLm1hdGNoKC9cXCguKz9cXCkvKTtyZXR1cm4gbyYmby5sZW5ndGgmJihvPW9bMF0pLG8/KG89by5yZXBsYWNlKC9cXHcuK2pzL2csZnVuY3Rpb24odCl7cmV0dXJuIGk9dCxcIlwifSksbz1vLnNwbGl0KFwiOlwiKSxvJiZvLmxlbmd0aD4xJiYocj1wYXJzZUludChvWzFdfHwwKSksbj1wYXJzZUludChvWzJdfHwwKSx0LmRhdGFzLmVycnMucHVzaCh7Y29sOm4sbGluZTpyLG5hbWU6aSxtc2c6c1swXStcIjtcIitzWzFdK1wiO1wiK3NbMl0rXCI7XCIsdHlwZTpcImpzXCJ9KSk6dC5kYXRhcy5lcnJzLnB1c2goe2NvbDowLGxpbmU6MCxuYW1lOlwiZXJyXCIsbXNnOmUrXCJcIix0eXBlOlwianNcIn0pLDI9PT10LmRhdGFzLnR5cGUmJnQucmVwb3J0KDMpLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLm9uU2hvdz1mdW5jdGlvbigpe3QuaXNSZXBvcnQ9ITEsdC5kYXRhcy50eXBlPTE7dmFyIGU9dC5yYW5kb21TdHJpbmcoKTtyZXR1cm4gd3guc2V0U3RvcmFnZSh7a2V5OlwicHNfd3hfbWFya191c2VyXCIsZGF0YTplfSksdC5kYXRhcy5tYXJrdXNlcj1lLHQuZGF0YXMubWFya3V2PXQubWFya1V2KCkscy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHQub3JpZ2luQXBwKGUpfX19LHtrZXk6XCJtYXJrVXZcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBEYXRlLGU9d3guZ2V0U3RvcmFnZVN5bmMoXCJwc193eF9tYXJrX3V2XCIpfHxcIlwiLGE9d3guZ2V0U3RvcmFnZVN5bmMoXCJwc193eF9tYXJrX3V2X3RpbWVcIil8fFwiXCIscz10LmdldEZ1bGxZZWFyKCkrXCIvXCIrKHQuZ2V0TW9udGgoKSsxKStcIi9cIit0LmdldERhdGUoKStcIiAyMzo1OTo1OVwiO3JldHVybighZSYmIWF8fHQuZ2V0VGltZSgpPjEqYSkmJihlPXRoaXMucmFuZG9tU3RyaW5nKCksd3guc2V0U3RvcmFnZSh7a2V5OlwicHNfd3hfbWFya191dlwiLGRhdGE6ZX0pLHd4LnNldFN0b3JhZ2Uoe2tleTpcInBzX3d4X21hcmtfdXZfdGltZVwiLGRhdGE6bmV3IERhdGUocykuZ2V0VGltZSgpfSkpLGV9fSx7a2V5OlwibmV0d29ya1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt3eC5nZXROZXR3b3JrVHlwZSh7c3VjY2VzczpmdW5jdGlvbihlKXt0LmRhdGFzLm5ldD1lLm5ldHdvcmtUeXBlfX0pfX0se2tleTpcInN5c3RlbVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt3eC5nZXRTeXN0ZW1JbmZvKHtzdWNjZXNzOmZ1bmN0aW9uKGUpe3QuZGF0YXMuc3lzdGVtPWV9fSl9fSx7a2V5OlwibG9jYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7d3guZ2V0TG9jYXRpb24oe3R5cGU6XCJ3Z3M4NFwiLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dC5kYXRhcy5sb2M9ZX19KX19LHtrZXk6XCJ3cmFwUmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bnVsbCxlPXd4LnJlcXVlc3QsYT1bXSxzPVtdLGk9dGhpcztPYmplY3QuZGVmaW5lUHJvcGVydHkod3gsXCJyZXF1ZXN0XCIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzWzBdfHx7fTtpLmhhdmVBamF4PSEwLGEucHVzaCh7dXJsOm4udXJsfHxcIlwiLG9wdGlvbnM6bi5kYXRhfHxcIlwiLG1ldGhvZDpuLm1ldGhvZHx8XCJHRVRcIixiZWdpbnRpbWU6KG5ldyBEYXRlKS5nZXRUaW1lKCl9KTt2YXIgcj1uLmNvbXBsZXRlfHxmdW5jdGlvbih0KXt9O3JldHVybiBuLmNvbXBsZXRlPWZ1bmN0aW9uKGUpe3ZhciBvPVwib2JqZWN0XCI9PT1fdHlwZW9mKGUuZGF0YSk/SlNPTi5zdHJpbmdpZnkoZS5kYXRhKTplLmRhdGF8fFwiXCIsdT1lLmhlYWRlcltcIkNvbnRlbnQtTGVuZ3RoXCJdfHxvLmxlbmd0aHx8MDtyZXR1cm4gcy5wdXNoKHtlcnJNc2c6ZS5lcnJNc2csdXJsOm4udXJsfHxcIlwiLHN0YXR1c0NvZGU6ZS5zdGF0dXNDb2RlLGVuZHRpbWU6KG5ldyBEYXRlKS5nZXRUaW1lKCksYm9keVNpemU6dX0pLHMubGVuZ3RoPT09YS5sZW5ndGgmJihjbGVhclRpbWVvdXQodCksdD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5sZW5ndGg9PT1hLmxlbmd0aCYmaS5tZXJnZUFqYXgoYSxzKSxhPVtdLHM9W10sY2xlYXJUaW1lb3V0KHQpfSxpLmNvbmZpZy50aW1lb3V0KSksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfX0se2tleTpcIm1lcmdlQWpheFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIGE9dGhpcztlLmZvckVhY2goZnVuY3Rpb24ocyxpKXtpZih0LmZvckVhY2goZnVuY3Rpb24odCxlKXtzLnVybC5pbmRleE9mKHQudXJsKT4tMSYmKFwicmVxdWVzdDpva1wiPT09cy5lcnJNc2cmJjIwMD09PXMuc3RhdHVzQ29kZT9hLmRhdGFzLmFqYXhzLnB1c2goe2R1cmF0aW9uOnMuZW5kdGltZS10LmJlZ2ludGltZXx8MCxuYW1lOnQudXJsLG1ldGhvZDp0Lm1ldGhvZCxib2R5U2l6ZTpzLmJvZHlTaXplLG9wdGlvbnM6dC5vcHRpb25zfSk6YS5kYXRhcy5lcnJzLnB1c2goe25hbWU6dC51cmwsbWV0aG9kOnQubWV0aG9kLG1zZzpzLmVyck1zZyx0eXBlOlwiYWpheFwiLHN0YXR1czpzLnN0YXR1c0NvZGUsb3B0aW9uczp0Lm9wdGlvbnN9KSl9KSxpPT09ZS5sZW5ndGgtMSl7aWYoIWEuY29uZmlnLmlzUmVwZWF0JiZhLmlzUmVwb3J0KXJldHVybjthLmlzUmVwb3J0PSEwLGEuZGF0YXMudGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxhLnJlcG9ydCgpfX0pfX0se2tleTpcInJlcG9ydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXthcHBJZDp0aGlzLmRhdGFzLmFwcElkLG1hcmt1c2VyOnRoaXMuZGF0YXMubWFya3VzZXIsbWFya3V2OnRoaXMuZGF0YXMubWFya3V2LHBhZ2VzOnRoaXMuZGF0YXMucGFnZXMsdGltZTp0aGlzLmRhdGFzLnRpbWUsdHlwZTp0aGlzLmRhdGFzLnR5cGUsYWpheHM6dGhpcy5kYXRhcy5hamF4cyxlcnJzOnRoaXMuZGF0YXMuZXJyc307dGhpcy5jb25maWcuaXNOZXQmJjE9PT10aGlzLmRhdGFzLnR5cGUmJihlLm5ldD10aGlzLmRhdGFzLm5ldCksdGhpcy5jb25maWcuaXNTeXMmJjE9PT10aGlzLmRhdGFzLnR5cGUmJihlLnN5c3RlbT10aGlzLmRhdGFzLnN5c3RlbSksdGhpcy5jb25maWcuaXNMb2NhbCYmMT09PXRoaXMuZGF0YXMudHlwZSYmKGUubG9jPXRoaXMuZGF0YXMubG9jKSx0JiYoZS50eXBlPXQpO3ZhciBhPW51bGwscz10aGlzLnd4UmVxdWVzdCh7bWV0aG9kOlwiUE9TVFwiLHVybDp0aGlzLmNvbmZpZy5kb21haW4sZGF0YTplLHN1Y2Nlc3M6ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KGEpfX0pO3RoaXMuaGF2ZUFqYXg9ITEsdGhpcy5pc1JlcG9ydD0hMSx0aGlzLmRhdGFzLnR5cGU9Mix0aGlzLmRhdGFzLmVycnM9W10sdGhpcy5kYXRhcy5hamF4cz1bXSxhPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLmFib3J0KCl9LDNlMyl9fV0pLHR9KCk7bW9kdWxlLmV4cG9ydHM9d3hSZXBvdFNkazsiXX0=